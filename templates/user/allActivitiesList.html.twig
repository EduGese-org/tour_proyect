{% extends 'base.html.twig' %}
{% block stylesheets %}
	<style>
		table {
			border-collapse: collapse;
			width: 100%;

		}
		th,
		td {
			border: 1px solid black;
			padding: 10px;

		}
		td {
			text-align: center;
		}
		th {
			background-color: gray;
		}
		div {
			width: 80%;
			margin: auto;
		}
		img {
			width: 100%;
			margin: auto;
		}
		.act_cr {
			margin: auto;
			width: 60%;
		}
		#mensaje {
			color: red;
		}
	</style>
{% endblock %}

{% block body %}
	<div>
		<p id="mensaje">
			{% for flashMessage in app.flashes('full') %}
				{{ flashMessage}}
			{% endfor %}
		</p>
		<h3>Actividades a las que unirse</h3>
		<table>
			<tr>
				<th>
					<button onclick="sortTable(0)">Nombre de la actividad</button>
				</th>
				<th>
					<button onclick="sortTable(1)">Fecha y hora</button>
				</th>
				<th>
					<button onclick="sortTable(2)">Descripción</button>
				</th>
				<th>
					<button onclick="sortTable(3)">Tickets disponibles</button>
				</th>
				<th>
					<button onclick="sortTable(4)">Localización inicio</button>
				</th>
				<th>
					<button onclick="sortTable(5)">Localización fin</button>
				</th>
				<th>
					<button onclick="sortTable(6)">Precio/persona</button>
				</th>
				<th>
					<button onclick="sortTable(7)">Img</button>
				</th>
				<th>
					<button onclick="sortTable(8)">Ciudad</button>
				</th>
				<th>
					<button onclick="sortTable(9)">Compañía</button>
				</th>
				<th>
					<button onclick="sortTable(10)">Paginaweb</button>
				</th>
				<!-- Otros campos de actividad -->
			</tr>
			<tbody class="miTabla">
				{% for activity in allActivities %}
					<tr>
						<td>{{ activity.getActivityName() }}</td>
						<td>{{ activity.getDate()|date('Y-m-d H:i:s') }}</td>
						<td>{{ activity.getDescription() }}</td>
						<td>{{ activity.getTickets() }}</td>
						<td>{{ activity.getStartUbication() }}</td>
						<td>{{ activity.getEndUbication() }}</td>
						<td>{{ activity.getPrice() }}</td>
						<td>
							{% if activity.getImage() is not null %}
								<img src="{{ asset(activity.getImage()) }}" alt="Mi imagen">
							{% endif %}
						</td>
						<td>{{ activity.getCity() }}</td>
						<td>{{ activity.getCompanyName() }}</td>
						<td>
							<a href="">{{ activity.getCompanyWebsite() }}</a>
						</td>
						<td>
							<a href="{{ path('show_activity', { 'id': activity.idActivity }) }}">ver</a>

						</td>
						{% if activity.getDate()|date('Y-m-d H:i:s')  < "now"|date('Y-m-d H:i:s') %}
							<td>
								<a href="{{ path('show_activity_reviews', { 'id': activity.idActivity }) }}">comentarios</a>

							</td>
						{% endif %}

					</tr>

				{% endfor %}

			</tbody>
		</table>

	</div>

	{% block javascripts %}
		<script src="{{ asset('/scripts/table_filter.js') }}"></script>
	{% endblock %}

{% endblock %}
